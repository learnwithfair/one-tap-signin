<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learn with Fair - Your Online Store</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Google One Tap -->
    <script src="https://accounts.google.com/gsi/client"></script>

    <style>
      .navbar {
        position: sticky;
        top: 0;
        z-index: 1030;
      }
      #user-info-bar {
        background-color: #f8f9fa;
        color: #333;
        font-size: 14px;
        padding: 5px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
      }
      #user-info-bar .info {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      #user-info-bar img {
        width: 45px;
        height: 45px;
        border-radius: 50%;
      }
      #logout-btn {
        padding: 6px 14px;
        font-size: 13px;
        border: none;
        background-color: #dc3545;
        color: white;
        border-radius: 4px;
        cursor: pointer;
      }
      #one-tap-wrapper,
      #google-signin-button {
        display: flex;
        justify-content: center;
        /* padding: 10px; */
      }

      .product-card img {
        max-height: 200px;
        object-fit: cover;
      }
      .carousel-inner img {
        height: 450px;
        object-fit: cover;
      }
      .carousel-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1;
      }
      .carousel-item .overlay-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
        color: white;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- User Info Bar -->
    <div id="user-info-bar" style="display: none">
      <div class="info" id="user-details"></div>
      <button id="logout-btn" onclick="logout()">Logout</button>
    </div>

    <!-- One Tap + Button Wrapper -->
    <div id="login-section" class="text-center">
      <div id="google-button"></div>
      <div id="one-tap-wrapper"></div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#">Learn with Fair</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#products">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./test.html">Another</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Hero Slider -->
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active position-relative">
          <img src="./img/1.jpg" class="d-block w-100" alt="Welcome" />
          <div class="overlay-content">
            <h5>Welcome to Learn with Fair</h5>
            <p>Your favorite destination for quality products</p>
          </div>
        </div>
        <div class="carousel-item position-relative">
          <img src="./img/2.jpg" class="d-block w-100" alt="Eco Friendly" />
          <div class="overlay-content">
            <h5>Eco-Friendly Choices</h5>
            <p>Sustainable products for a better future</p>
          </div>
        </div>
        <div class="carousel-item position-relative">
          <img src="./img/1.jpg" class="d-block w-100" alt="Delivery" />
          <div class="overlay-content">
            <h5>Fast Delivery</h5>
            <p>Quick and safe shipping to your doorstep</p>
          </div>
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <!-- Products Section -->
    <section id="products" class="py-5 bg-light">
      <div class="container">
        <h2 class="mb-4 text-center">Featured Products</h2>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="card product-card shadow-sm">
              <img
                src="https://images.unsplash.com/photo-1585386959984-a4155224a1ad"
                class="card-img-top"
                alt="Organic Soap"
              />
              <div class="card-body">
                <h5 class="card-title">Organic Soap</h5>
                <p class="card-text">
                  Natural ingredients for gentle, effective.
                </p>
                <button class="btn btn-success w-100">Buy Now</button>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card product-card shadow-sm">
              <img
                src="https://images.unsplash.com/photo-1585386959984-a4155224a1ad"
                class="card-img-top"
                alt="Reusable Bottle"
              />
              <div class="card-body">
                <h5 class="card-title">Reusable Bottle</h5>
                <p class="card-text">Stay hydrated while helping the planet.</p>
                <button class="btn btn-success w-100">Buy Now</button>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card product-card shadow-sm">
              <img
                src="https://images.unsplash.com/photo-1585386959984-a4155224a1ad"
                class="card-img-top"
                alt="Bamboo Toothbrush"
              />
              <div class="card-body">
                <h5 class="card-title">Bamboo Toothbrush</h5>
                <p class="card-text">Eco-conscious oral care with style.</p>
                <button class="btn btn-success w-100">Buy Now</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="bg-dark text-white py-5">
      <div class="container">
        <h2 class="mb-4 text-center">Contact Us</h2>
        <div class="row justify-content-center">
          <div class="col-md-6">
            <form>
              <div class="mb-3">
                <label for="name" class="form-label">Your Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  value="Md Rahatul Rabbi"
                />
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <input type="email" class="form-control" id="email" />
              </div>
              <div class="mb-3">
                <label for="message" class="form-label">Message</label>
                <textarea class="form-control" id="message" rows="3"></textarea>
              </div>
              <button type="submit" class="btn btn-light">Send</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-secondary text-white text-center py-3">
      <div class="container">
        <small
          >&copy; 2025 Learn with Fair. All rights reserved. Developed by Md
          Rahatul Rabbi.</small
        >
      </div>
    </footer>
    <script>
      function handleCredentialResponse(response) {
        const data = parseJwt(response.credential);
        localStorage.setItem("user_name", data.name);
        localStorage.setItem("user_email", data.email);
        localStorage.setItem("user_picture", data.picture);
        document.body.classList.add("user-logged-in");
        google.accounts.id.cancel();
        google.accounts.id.disableAutoSelect();
        showUserInfo();
      }

      function parseJwt(token) {
        const base64Url = token.split(".")[1];
        const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
        const jsonPayload = decodeURIComponent(
          atob(base64)
            .split("")
            .map((c) => "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2))
            .join("")
        );
        return JSON.parse(jsonPayload);
      }

      function injectLoginUI() {
        const clientId =
          "407936925185-jed51av21sugn8as379e3qtf7bfk6vt3.apps.googleusercontent.com";

        if (typeof google === "undefined" || !google.accounts?.id) {
          console.warn("Google script not ready.");
          return;
        }

        // Render button
        google.accounts.id.initialize({
          client_id: clientId,
          callback: handleCredentialResponse,
          auto_select: true,
          cancel_on_tap_outside: false,
        });

        google.accounts.id.renderButton(
          document.getElementById("google-button"),
          {
            theme: "filled_blue",
            size: "large",
            type: "standard",
            text: "signin_with",
            shape: "rectangular",
            logo_alignment: "left",
          }
        );

        google.accounts.id.prompt((notification) => {
          if (notification.isNotDisplayed()) {
            console.warn(
              "One Tap not shown:",
              notification.getNotDisplayedReason()
            );
          }
          if (notification.isSkippedMoment()) {
            console.warn("One Tap skipped:", notification.getSkippedReason());
          }
        });
      }

      function showUserInfo() {
        const name = localStorage.getItem("user_name");
        const email = localStorage.getItem("user_email");
        const picture = localStorage.getItem("user_picture");

        const userBar = document.getElementById("user-info-bar");
        const userDetails = document.getElementById("user-details");
        const loginSection = document.getElementById("login-section");

        if (name && email && picture) {
          userDetails.innerHTML = `<img src="${picture}" alt="Profile"> <span><strong>${name}</strong><br>${email}</span>`;
          userBar.style.display = "flex";
          loginSection.style.display = "none";
          document.body.classList.add("user-logged-in");
        } else {
          userBar.style.display = "none";
          loginSection.style.display = "block";
          document.body.classList.remove("user-logged-in");
          injectLoginUI();
        }
      }

      function logout() {
        localStorage.clear();
        document.body.classList.remove("user-logged-in");
        google.accounts.id.disableAutoSelect();
        google.accounts.id.cancel();
        showUserInfo();
      }

      document.addEventListener("DOMContentLoaded", () => {
        showUserInfo();
      });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
